var bigdata = {
  "synergies": [
    {
      "class": "Berserker",
      "syn_type": "damage burst",
      "Skill": "red dust",
      "syn": "12% damage",
	  "synvalue": 12,
      "duration": 6,
      "uptime": "low"
    },
    {
      "class": "Shadowhunter",
      "syn_type": "damage burst",
      "skill": "howl",
      "syn": "12% damage",
	  "synvalue": 12,
      "duration": 6,
      "uptime": "low"
    },
    {
      "class": "Gunlancer",
      "syn_type": "damage burst",
      "skill": "shout of hatred",
      "syn": "3% damage",
	  "synvalue": 3,
      "duration": 12,
      "uptime": "low"
    },
	{
      "class": "Gunlancer",
      "syn_type": "head back damage",
      "skill": "shout of hatred",
      "syn": "9% head/back attack damage",
	  "synvalue": 9,
      "duration": 12,
      "uptime": "low"
    },
    {
      "class": "Scrapper",
      "syn_type": "damage constant",
      "skill": "fierce tiger strike, crushing strike, judgement",
      "syn": "6% damage",
      "synvalue": 6,
      "duration": 8,
      "uptime": "high"
    },
    {
      "class": "Soulfist",
      "syn_type": "damage constant",
      "skill": "enegry release, pulverizing palm",
      "syn": "6% damage",
      "synvalue": 6,
      "duration": 16,
      "uptime": "medium"
    },
    {
      "class": "Soulfist",
      "syn_type": "damage constant",
      "skill": "pulverizing palm",
      "syn": "6% damage",
      "synvalue": 6,
      "duration": 8,
      "uptime": "high"
    },
    {
      "class": "Sorceress",
      "syn_type": "damage constant",
      "skill": "dancing flame, whirlpool lightning",
      "syn": "6% damage",
      "synvalue": 6,
      "duration": 8,
      "uptime": "high"
    },
    {
      "class": "Sharpshooter",
      "syn_type": "damage constant",
      "skill": "rapid shot, atomic arrow",
      "syn": "6% damage",
      "synvalue": 6,
      "duration": 8,
      "uptime": "high"
    },
    {
      "class": "Deathblade",
      "syn_type": "damage constant",
      "skill": "spincutter",
      "syn": "3% damage",
      "synvalue": 3,
      "duration": 10,
      "uptime": "high"
    },
	{
      "class": "Deathblade",
      "syn_type": "head back damage",
      "skill": "spincutter",
      "syn": "9% head/back attack damage",
      "synvalue": 9,
      "duration": 10,
      "uptime": "high"
    },
    {
      "class": "Wardancer",
      "syn_type": "crit burst",
      "skill": "roar of courage",
      "syn": "18% crit rate",
      "synvalue": 18,
      "duration": 8,
      "uptime": "low"
    },
    {
      "class": "Striker",
      "syn_type": "crit burst",
      "skill": "Lightning Whisper",
      "syn": "18% crit rate",
      "synvalue": 18,
      "duration": 6,
      "uptime": "low"
    },
    {
      "class": "Gunlancer",
      "syn_type": "crit burst",
      "skill": "lance of judgement",
      "syn": "10% crit rate",
      "synvalue": 10,
      "duration": 10,
      "uptime": "low"
    },
    {
      "class": "Bard",
      "syn_type": "crit burst",
      "skill": "oratorio",
      "syn": "12% crit rate",
      "synvalue": 12,
      "duration": 6,
      "uptime": "low"
    },
    {
      "class": "Deadeye",
      "syn_type": "crit constant",
      "skill": "spiral tracker, at02 grenade",
      "syn": "10% crit rate",
      "synvalue": 10,
      "duration": 6,
      "uptime": "high"
    },
    {
      "class": "Gunslinger",
      "syn_type": "crit constant",
      "skill": "spiral tracker, dexterous shot, equilibrium",
      "syn": "10% crit rate",
      "synvalue": 10,
      "duration": 6,
      "uptime": "high"
    },
    {
      "class": "Artillerist",
      "syn_type": "def reduce",
      "skill": "summon turret",
      "syn": "12% defense reduction",
      "synvalue": 12,
      "duration": 6,
      "uptime": "high"
    },
    {
      "class": "Gunlancer",
      "syn_type": "def reduce",
      "skill": "bash",
      "syn": "12% defense reduction",
      "synvalue": 12,
      "duration": 10,
      "uptime": "high"
    },
    {
      "class": "Deathblade",
      "syn_type": "movement speed",
      "skill": "maelstrom",
      "syn": "15% move spd",
      "synvalue": 15,
      "duration": 6,
      "uptime": "low"
    },
	{
      "class": "Deathblade",
      "syn_type": "attack speed",
      "skill": "maelstrom",
      "syn": "20% atk spd",
      "synvalue": 20,
      "duration": 6,
      "uptime": "low"
    },
    {
      "class": "Wardancer",
      "syn_type": "movement speed",
      "skill": "wind's whisper",
      "syn": "16% move spd",
      "synvalue": 16,
      "duration": 6,
      "uptime": "low"
    },
	{
      "class": "Wardancer",
      "syn_type": "attack speed",
      "skill": "wind's whisper",
      "syn": "8% atk spd",
      "synvalue": 8,
      "duration": 6,
      "uptime": "low"
    },
    {
      "class": "Gunlancer",
      "syn_type": "attack speed",
      "skill": "Nellasia's Energy",
      "syn": "20% atk spd",
      "synvalue": 20,
      "duration": 6,
      "uptime": "low"
    },
	{
      "class": "Gunlancer",
      "syn_type": "shield",
      "skill": "Nellasia's Energy",
      "syn": "24% shield",
      "synvalue": 24,
      "duration": 6,
      "uptime": "low"
    },
    {
      "class": "Soulfist",
      "syn_type": "damage reduce",
      "skill": "energy release",
      "syn": "25% damage reduction",
      "synvalue": 25,
      "duration": 6,
      "uptime": "medium"
    },
    {
      "class": "Artillerist",
      "syn_type": "stagger damage",
      "skill": "napalm shot",
      "syn": "20% stagger damage",
      "synvalue": 20,
      "duration": 4,
      "uptime": "low"
    },
    {
      "class": "Scrapper",
      "syn_type": "stagger damage",
      "skill": "Critical Blow",
      "syn": "20% stagger damage",
      "synvalue": 20,
      "duration": 6,
      "uptime": "low"
    },
    {
      "class": "Paladin",
      "syn_type": "damage constant",
      "skill": "Light Shock",
      "syn": "10% damage",
      "synvalue": 10,
      "duration": 6,
      "uptime": "high"
    },
    {
      "class": "Paladin",
      "syn_type": "damage burst",
      "skill": "Wrath of God",
      "syn": "15% damage",
      "synvalue": 15,
      "duration": 8,
      "uptime": "low"
    },
    {
      "class": "Paladin",
      "syn_type": "damage burst",
      "skill": "Heavenly Blessings",
      "syn": "15% damage",
      "synvalue": 15,
      "duration": 8,
      "uptime": "low"
    },
	{
      "class": "Paladin",
      "syn_type": "mp regen",
      "skill": "Heavenly Blessings",
      "syn": "40% MP Regen",
      "synvalue": 40,
      "duration": 8,
      "uptime": "low"
    },
    {
      "class": "Paladin",
      "syn_type": "damage burst",
      "skill": "Holy Aura",
      "syn": "10% damage",
      "synvalue": 10,
      "duration": 15,
      "uptime": "low"
    },
    {
      "class": "Bard",
      "syn_type": "damage constant",
      "skill": "Sound Shock",
      "syn": "10% damage",
      "synvalue": 10,
      "duration": 4,
      "uptime": "high"
    },
    {
      "class": "Bard",
      "syn_type": "damage constant",
      "skill": "Harp of Rhythm",
      "syn": "10% damage",
      "synvalue": 10,
      "duration": 10,
      "uptime": "high"
    },
    {
      "class": "Bard",
      "syn_type": "damage burst",
      "skill": "Heavenly Tune",
      "syn": "15% damage",
      "synvalue": 15,
      "duration": 8,
      "uptime": "low"
    },
	{
      "class": "Bard",
      "syn_type": "attack speed",
      "skill": "Heavenly Tune",
      "syn": "8% atk spd",
      "synvalue": 8,
      "duration": 8,
      "uptime": "low"
    },
    {
      "class": "Bard",
      "syn_type": "damage burst",
      "skill": "Sonic Vibration",
      "syn": "15% damage",
      "synvalue": 15,
      "duration": 5,
      "uptime": "low"
    },
    {
      "class": "Bard",
      "syn_type": "damage burst",
      "skill": "Serenade of Courage",
      "syn": "5/10/15% damage 8/16/24sec duration",
      "synvalue": 5,
      "duration": 8,
      "uptime": "low"
    }
  ]
};

var selections = {};
var classlist = [];
var selclass = document.getElementById("selected-classes");
var selsyns = document.getElementById("selected-syns");

var bDmg = document.getElementById("burst-damage");
var cDmg = document.getElementById("constant-damage");
var bCrit = document.getElementById("burst-crit");
var cCrit = document.getElementById("constant-crit");

var hbDmg = document.getElementById("head-back-damage");
var dReduce = document.getElementById("def-reduce");
var movespeed = document.getElementById("move-speed");
var aspeed = document.getElementById("attack-speed");

var shld = document.getElementById("shield");
var dmgReduce = document.getElementById("damage-reduce");
var stagDmg = document.getElementById("stagger-damage");
var mpR = document.getElementById("mp-regen");

var totals = document.getElementById("totalsyns");

$(document).ready(function() {
	
	//loop for each syngery 
	for (var i=0; i<bigdata.synergies.length; i++) {
	//	console.log('syngery 3 ' + bigdata.synergies[i].class);
	//	console.log('syngery 3 ' + Object.keys(bigdata.synergies[i]));
	//	console.log('syngery 3 ' + Object.values(bigdata.synergies[i]));
	    classlist.push(bigdata.synergies[i].class);
		//loop for each element within the syngery
		for (var key in bigdata.synergies[i]) {
			//classlist.push(bigdata.synergies[i][key][class]);
			//console.log('syngery 1' + bigdata.synergies[i][key][syn]);
			//console.log('syngery 1 ' + bigdata.synergies[i]);
			//console.log('syngery 2 ' + bigdata.synergies[i][key]);
			
			//console.log('syngery 2' + bigdata.synergies[i][key][uptime]);
			//for (var j= 0; j<bigdata.synergies[i][key].length; j++) {
			//	console.log(bigdata.synergies[i][key][j])
			//}
		}
	}
	
	console.log('class list ' + classlist);
	
	//create set to dedupe classList
	let uniqueClassesSet = [...new Set(classlist)];
	let uniqueClassesArray = [...uniqueClassesSet];
	
	//console.log('unique class list Set' + uniqueClassesSet);
	//console.log('unique class list Array ' + uniqueClassesArray);
	
	
	var $grouplist = $('#checkboxes3');
	$(uniqueClassesArray).each(function(index,value) {
		//console.log('inside arrray loop ' +value);
        $('<li><label><input type=checkbox name='+value+' value='+value+'/> ' +value+'</label></li>').appendTo($grouplist);
    });
	
	var checkboxElems = document.querySelectorAll("input[type='checkbox']");

	for (var i = 0; i < checkboxElems.length; i++) {
	checkboxElems[i].addEventListener("click", displayCheck);
}
});

function displayCheck(e) {
	//console.log('From the event listener');
	
  if (e.target.checked) {
    selections[e.target.name] = {
      name: e.target.name
    };
  } 
  else {
    delete selections[e.target.name];
  }

  var result = [];
  var total = 0;
    
  var totalList = [];
  
  // these vars store the html for displaying each of the syns
  var burstDmg=[];
  var burstCrit=[];
  var constDmg=[];
  var constCrit=[];
  var headbackDmg=[];
  var defReduce=[];
  var movementSpeed=[];
  var attackSpeed=[];
  var shield=[];
  var damageReduce=[];
  var staggerDmg=[];
  var mpRegen=[];

  
  // these var arrays store the numbers associated to each syn. to be later sum'ed.
  var totalBurstCrit = [0];
  var totalConstCrit = [0];
  var totalBurstDmg = [0];
  var totalConstDmg = [0];
  var totalheadbackDmg=[0];
  var totaldefReduce=[0];
  var totalmovementSpeed=[0];
  var totalattackSpeed=[0];
  var totalshield=[0];
  var totaldamageReduce=[0];
  var totalstaggerDmg=[0];
  var totalmpRegen=[0];

  for (var key in selections) {
    
	
	//loop for each syngery 
	for (var i=0; i<bigdata.synergies.length; i++) {
		//if the class matches on the syngery list, then proceed to add values to the display
		//otherwise next
		if (bigdata.synergies[i].class == key){
			console.log('matching');
			var Item = 	"<ul>"+"<li> Class : "+ bigdata.synergies[i]['class'] + "</li><li> Syn : "+ bigdata.synergies[i]['syn'] + "</li><li> Skill : "+ bigdata.synergies[i]['skill'] + "</li><li> Uptime : "+ bigdata.synergies[i]['uptime'] + "</li>"+"</ul>";
			
			console.log('syn type' + bigdata.synergies[i]['syn_type']);
			
			if (bigdata.synergies[i]['syn_type'] == 'damage burst'){
				burstDmg.push(Item);
				totalBurstDmg.push(bigdata.synergies[i]['synvalue']);
			}
			if (bigdata.synergies[i]['syn_type'] == 'damage constant'){
				constDmg.push(Item);
				totalConstDmg.push(bigdata.synergies[i]['synvalue']);				
			}
			if (bigdata.synergies[i]['syn_type'] == 'crit burst'){
				burstCrit.push(Item);
				totalBurstCrit.push(bigdata.synergies[i]['synvalue']);
			}
			if (bigdata.synergies[i]['syn_type'] == 'crit constant'){
				constCrit.push(Item);
				totalConstCrit.push(bigdata.synergies[i]['synvalue']);
			}
			if (bigdata.synergies[i]['syn_type'] == 'head back damage'){
				headbackDmg.push(Item);
				totalheadbackDmg.push(bigdata.synergies[i]['synvalue']);
			}
			if (bigdata.synergies[i]['syn_type'] == 'def reduce'){
				defReduce.push(Item);
				totaldefReduce.push(bigdata.synergies[i]['synvalue']);				
			}
			if (bigdata.synergies[i]['syn_type'] == 'movement speed'){
				movementSpeed.push(Item);
				totalmovementSpeed.push(bigdata.synergies[i]['synvalue']);
			}
			if (bigdata.synergies[i]['syn_type'] == 'attack speed'){
				attackSpeed.push(Item);
				totalattackSpeed.push(bigdata.synergies[i]['synvalue']);
			}
			if (bigdata.synergies[i]['syn_type'] == 'shield'){
				shield.push(Item);
				totalshield.push(bigdata.synergies[i]['synvalue']);
			}
			if (bigdata.synergies[i]['syn_type'] == 'damage reduce'){
				damageReduce.push(Item);
				totaldamageReduce.push(bigdata.synergies[i]['synvalue']);				
			}
			if (bigdata.synergies[i]['syn_type'] == 'stagger damage'){
				staggerDmg.push(Item);
				totalstaggerDmg.push(bigdata.synergies[i]['synvalue']);
			}
			if (bigdata.synergies[i]['syn_type'] == 'mp regen'){
				mpRegen.push(Item);
				totalmpRegen.push(bigdata.synergies[i]['synvalue']);
			}
		}
		//loop for each element within the syngery
		for (var k in bigdata.synergies[i]) {
		}
	}
	
	
	var listItem = "<li>" + selections[key].name + "</li>";
    result.push(listItem);
    //total += parseInt(selections[key].value.substring(1));
  }

	const sumBurstCrit 		= 	totalBurstCrit.reduce((a, b) => a + b);
	const sumConstCrit 		= 	totalConstCrit.reduce((a, b) => a + b);
	const sumBurstDmg 		= 	totalBurstDmg.reduce((a, b) => a + b);
	const sumConstDmg 		= 	totalConstDmg.reduce((a, b) => a + b);
	const sumheadbackDmg	=	totalheadbackDmg.reduce((a, b) => a + b);
	const sumdefReduce		=	totaldefReduce.reduce((a, b) => a + b);
	const summovementSpeed	=	totalmovementSpeed.reduce((a, b) => a + b);
	const sumattackSpeed	=	totalattackSpeed.reduce((a, b) => a + b);
	const sumshield			=	totalshield.reduce((a, b) => a + b);
	const sumdamageReduce	=	totaldamageReduce.reduce((a, b) => a + b);
	const sumstaggerDmg		=	totalstaggerDmg.reduce((a, b) => a + b);
	const summpRegen		=	totalmpRegen.reduce((a, b) => a + b);
	
	totalList.push("<ul>");
	totalList.push("<li> Burst Crit : "+ sumBurstCrit + "%</li>");
	totalList.push("<li> Constant Crit : "+ sumConstCrit + "%</li>");
	totalList.push("<li> Burst Damage : "+ sumBurstDmg + "%</li>");
	totalList.push("<li> Constant Damage : "+ sumConstDmg + "%</li>");
	totalList.push("<li> Head/Back Damage : "+ sumheadbackDmg + "%</li>");
	totalList.push("<li> Defense Reduction : "+ sumdefReduce + "%</li>");
	totalList.push("<li> Movement Speed : "+ summovementSpeed + "%</li>");
	totalList.push("<li> Attack Speed : "+ sumattackSpeed + "%</li>");
	totalList.push("<li> Shield : "+ sumshield + "%</li>");
	totalList.push("<li> Damage Reduction : "+ sumdamageReduce + "%</li>");
	totalList.push("<li> Stagger Damage : "+ sumstaggerDmg + "%</li>");
	totalList.push("<li> MP Regen : "+ summpRegen + "%</li>");
	totalList.push("</ul>");
	
  totals.innerHTML = totalList.join("");
  
  
  bDmg.innerHTML = burstDmg.join("");
  cDmg.innerHTML = constDmg.join("");
  bCrit.innerHTML = burstCrit.join("");
  cCrit.innerHTML = constCrit.join("");
  
  hbDmg.innerHTML = headbackDmg.join("");
  dReduce.innerHTML = defReduce.join("");
  movespeed.innerHTML = movementSpeed.join("");
  aspeed.innerHTML = attackSpeed.join("");
  
  shld.innerHTML = shield.join("");
  dmgReduce.innerHTML = damageReduce.join("");
  stagDmg.innerHTML = staggerDmg.join("");
  mpR.innerHTML = mpRegen.join("");
  
  //selsyns.innerHTML = synList.join("");
  //selclass.innerHTML = result.join("");
  
}


